<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birds Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 600px; }
        .dropdown {
            margin-bottom: 10px;
        }
        #birdSelect {
            width: 100%;
            height: auto; /* Adjust height for better visibility */
        }
    </style>
</head>
<body>
    <h1>Birds Map</h1>
    
    <div class="dropdown">
        <label for="birdSelect">Select Birds:</label>
        <select id="birdSelect" multiple onchange="updateMarkers()">
            <option value="Species A">Species A</option>
            <option value="Species B">Species B</option>
            <option value="Species C">Species C</option>
            <option value="Species D">Species D</option>
        </select>
    </div>
    
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        var map = L.map('map').setView([-9.19, -75.0152], 12);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        // Sample data for markers
        const birdData = [
            { lat: -9.19, lon: -75.0152, species: "Species A" },
            { lat: -9.20, lon: -75.0160, species: "Species B" },
            { lat: -9.21, lon: -75.0170, species: "Species C" },
            { lat: -9.22, lon: -75.0180, species: "Species D" }
        ];

        // Store markers for filtering
        var markers = [];

        // Load markers onto the map
        function loadMarkers() {
            birdData.forEach(bird => {
                const marker = L.marker([bird.lat, bird.lon]).addTo(map)
                    .bindPopup(bird.species);
                markers.push({ marker: marker, species: bird.species });
            });
        }

        // Call the function to load markers
        loadMarkers();

        // Update markers based on selected species
        function updateMarkers() {
            const selectedOptions = Array.from(document.getElementById("birdSelect").selectedOptions);
            const selectedSpecies = selectedOptions.map(option => option.value);

            // Clear all markers from the map
            markers.forEach(item => {
                map.removeLayer(item.marker);
            });

            // Add back only the selected species markers
            if (selectedSpecies.length > 0) {
                markers.forEach(item => {
                    if (selectedSpecies.includes(item.species)) {
                        item.marker.addTo(map);
                    }
                });
            } else {
                // If no selection, add all markers back
                loadMarkers();
            }
        }
    </script>
</body>
</html>
